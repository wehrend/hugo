<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Since one week my blog is build on the static-site-generator Hugo. I wanted to move to Hugo far earlier, due to the wide variety of themes. However this required the move from Asciidoc to Asciidoctor, and I experienced a few problems with the integration of Asciidoctor into my existing workflow. As the approach of rendering the latex-equations in the asciidoc-documents no loger worked, I decided to move on to client-based rendering of formulas, like done in KaTex and Mathjax.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Moving to Hugo" />
<meta property="og:description" content="Since one week my blog is build on the static-site-generator Hugo. I wanted to move to Hugo far earlier, due to the wide variety of themes. However this required the move from Asciidoc to Asciidoctor, and I experienced a few problems with the integration of Asciidoctor into my existing workflow. As the approach of rendering the latex-equations in the asciidoc-documents no loger worked, I decided to move on to client-based rendering of formulas, like done in KaTex and Mathjax." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/en/posts/web/02_moving-to-hugo/" /><meta property="article:section" content="en" />
<meta property="article:published_time" content="2022-04-15T12:17:41+00:00" />
<meta property="article:modified_time" content="2022-04-15T12:17:41+00:00" />
<title>Moving to Hugo | Bits &amp; pieces - Sven Wehrend</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.a638a97f489029f3eda833b0905717d5a2da0b571423db855dd7ce4336238e77.css" integrity="sha256-pjipf0iQKfPtqDOwkFcX1aLaC1cUI9uFXdfOQzYjjnc=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.78166b9d46e23e0ea915cb6887a30b633e7bc4fad10c8b6b9f6fa532271c19ba.js" integrity="sha256-eBZrnUbiPg6pFctoh6MLYz57xPrRDItrn2&#43;lMiccGbo=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Bits &amp; pieces - Sven Wehrend</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



  



  
    
  



<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex justify-between">
      <a role="button" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </label>

    <ul>
      
      <li>
        <a href="http://localhost:1313/de/">
          Deutsch
        </a>
      </li>
      
    </ul>
  </li>
</ul>





  
<ul>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        
      </a>
  </li>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        Web-Blog
      </a>
  </li>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        Synth-Blog
      </a>
  </li>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        Digital Logic 2 (Overview)
      </a>
  </li>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        Electronics 101
      </a>
  </li>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        Electronics 102
      </a>
  </li>
  
</ul>






  



  
  <ul>
    
      
        <li>
          
  
  

  
    <span>Digital Logic 2</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic_2/10_sequential_logic/" class="">10_sequential_logic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic_2/11_clocks_and_registers/" class="">11_Clocks_flipflops_and_registers</a>
  

        </li>
      
    
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Digital Logic X</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic_x/x2_cordic/" class="">X2_cordic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic_x/x0_multiplication/" class="">X0_multiplication</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Digital Logic</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic/00_combinatorial_logic/" class="">00_combinatorial_logic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic/07_risc_v/" class="">07_RISC-V</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic/06_memory/" class="">06_Memory</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic/05_alu/" class="">05_ALU</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic/04_signs/" class="">04_Signs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic/03_binary_system/" class="">03_binary_system</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic/02_xor/" class="">02_XOR</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/en/docs/digital_logic/01_boolean_algebra/" class="">01_boolean_algebra</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>










  
<ul>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        About
      </a>
  </li>
  
  <li>
    <a href="/de/docs/digital_logic_2/images/how_does_cpu/" >
        Digital Logic 2
      </a>
  </li>
  
  <li>
    <a href="" target="_blank" rel="noopener">
        Digital Logic 1 (Overview)
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Moving to Hugo</strong>

  <label for="toc-control">
    
  </label>
</div>

<ul>
  
  
  
  

  
  <li>
    <select id="selectLanguage" onchange="location = this.value">
      
      
      
        
        <option value="/en/posts/web/02_moving-to-hugo/" selected>
          English
        </option>
      
    </select>
  </li>

  
  
</ul>


  
 
      </header>

      
      
  <article class="markdown"><div class="paragraph">
<p>Since one week my blog is build on the static-site-generator <a href="https://gohugo.io/">Hugo</a>.
I wanted to move to Hugo far earlier, due to the wide variety of themes.
However this required the move from Asciidoc to <a href="https://asciidoctor.org/">Asciidoctor</a>,
and I experienced a few problems with the integration of Asciidoctor into my existing workflow.
As the approach of rendering the latex-equations in the asciidoc-documents
no loger worked, I decided to move on to client-based rendering of formulas,
like done in <a href="https://gohugo.io/Katex">KaTex</a> and <a href="https://www.mathjax.org/">Mathjax</a>.</p>
</div>
<div class="paragraph">
<p>So to install Hugo, Asciidoctor and its dependencies without headaches,
we again make use of Docker and its huge ecosystem: Sombody already created Docker images for hugo with asciidoctor integrated,
so we do not need to go thru the sometimes cumbersome setup of Asciidoctor and its dependencies.</p>
</div>
<div class="paragraph">
<p>With docker installed, in the shell (for Linux and Mac OS, for Windows the powershell) we do a</p>
</div>
<div class="listingblock">
<div class="content">
<pre>docker pull klakegg/hugo:edge-asciidoctor</pre>
</div>
</div>
<div class="paragraph">
<p>which pulls an image with the latest Hugo version and Asciidoctor integrated from the Docker-repo klakegg .</p>
</div>
<div class="paragraph">
<p>We navigate to the parent-directory of our blog, and run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>docker run  -it -v $(pwd):/src klakegg/hugo:edge-asciidoctor new site hugo/blog</pre>
</div>
</div>
<div class="paragraph">
<p>This creates the skeleton of our new site, looking like that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>old-blog
hugo
 └── blog
    ├── archetypes
    ├── config.toml
    ├── content
    ├── data
    ├── layouts
    ├── static
    └── themes</pre>
</div>
</div>
<div class="paragraph">
<p>We have no theme installed yet, so go to <a href="https://themes.gohugo.io/">themes</a> and select your favorite,
mine is <a href="https://themes.gohugo.io/themes/hugo-book/">Book</a>. We install it via simple download or via git</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd hugo/themes
git clone https://github.com/alex-shpak/hugo-book</pre>
</div>
</div>
<div class="paragraph">
<p>and add the line</p>
</div>
<div class="listingblock">
<div class="content">
<pre>theme = &#34;hugo-book&#34;</pre>
</div>
</div>
<div class="paragraph">
<p>to our config.toml. While we are at it we also add the following policy, necessary since hugo version 0.91, to our config.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="literalblock">
<div class="content">
<pre>enableInlineShortcodes = false
[security.exec]
  allow = [&#39;^dart-sass-embedded$&#39;, &#39;^go$&#39;, &#39;^npx$&#39;, &#39;^postcss$&#39;, &#39;^asciidoctor$&#39;]
  osEnv = [&#39;(?i)^(PATH|PATHEXT|APPDATA|TMP|TEMP|TERM)$&#39;]</pre>
</div>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Now we need to move the content from the old blog to new, we do something similar to this</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cp ../old_blog/pages ../hugo/content/docs
cp ../old_blog/posts ../hugo/content/posts
cp ../old_blog/images ../hugo/content/docs/images</pre>
</div>
</div>
<div class="paragraph">
<p>Now we need to convert the adoc-headers to the hugo frontmatter format,and also adapt the
asciidoc syntax to the new.
To make our new blog digesting the equations and formulas written in Latex, we need to add the script for KaTex / Mathjax at some
layout-file in the theme of our choice: <a href="https://katex.org/docs/browser.html">Integrate KaTex</a></p>
</div>
<div class="paragraph">
<p>To see what we need to change we execue the hugo-server and in the browser head over to the given address
<a href="http://localhost:1313" class="bare">http://localhost:1313</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre>docker run  -it -v $(pwd):/src -p 1313:1313 swehrend/hugo-ext-asciidoctor:edge-ext-debian server --renderToDisk</pre>
</div>
</div>
<div class="paragraph">
<p>which results in something similar to this:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../hugo_server.png" alt="unnamed image"/></span></p>
</div>
<div class="paragraph">
<p>If we are satisfied with the result we can deploy our site with an rsync to our webspace, something similar
to the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rsync -rav public/ wehrend@giclas.uberspace.de:/var/www/virtual/wehrend/html</pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="../new_site.png" alt="unnamed image"/></span></p>
</div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


Last update: September 18, 2024 


</div>
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous">

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js" integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script>

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
        



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>



 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  
</body>
</html>












